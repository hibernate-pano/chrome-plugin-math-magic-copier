# Math Magic Copier

一个 Chrome 扩展，用于捕获网页上的数学公式并转换为 MathType 格式，方便粘贴到 Word 文档中。

## 功能特点

- 捕获网页上的数学公式（支持 LaTeX、MathML 等格式）
- 将公式转换为 MathType 兼容格式
- 支持直接粘贴到 Word 文档中
- 简单直观的用户界面
- 实时公式预览和高亮

## 系统架构

### 核心组件

1. **扩展弹出窗口 (Popup)**

   - 提供主要用户界面
   - 处理图片上传和预览
   - 集成 MathJax 进行公式渲染
   - 管理剪贴板操作

2. **内容脚本 (Content Script)**

   - 实现页面公式选择功能
   - 处理截图操作
   - 管理选择框和工具栏 UI
   - 集成 html2canvas 实现页面截图

3. **后台脚本 (Background Script)**
   - 处理跨域请求
   - 管理 API 调用
   - 处理剪贴板操作
   - 管理通知系统

### 技术栈

- **前端框架**：原生 JavaScript
- **UI 渲染**：HTML5 + CSS3
- **公式渲染**：MathJax
- **截图工具**：html2canvas
- **API 集成**：硅基流动 AI API

## 详细功能说明

### 1. 公式捕获系统

- **区域选择**：自定义选择框实现精确区域选择
- **实时预览**：选择时实时显示选择区域
- **智能识别**：支持多种公式格式的识别
- **图像优化**：自动压缩和优化截图质量

### 2. 公式识别转换

- **OCR 识别**：使用硅基流动 AI API 进行图像识别
- **格式转换**：自动将识别结果转换为标准 LaTeX 格式
- **错误处理**：完善的错误提示和异常处理机制

### 3. 用户界面

- **弹出窗口**：简洁的操作界面
- **工具栏**：便捷的操作按钮
- **预览功能**：实时公式渲染预览
- **状态提示**：清晰的操作状态反馈

### 4. 数据处理流程

1. 用户选择/上传公式图片
2. 图像预处理和压缩
3. AI 接口识别公式
4. LaTeX 格式转换
5. MathJax 预览渲染
6. 剪贴板复制

## 安装说明

1. 克隆或下载此仓库
2. 打开 Chrome 浏览器，进入扩展管理页面（chrome://extensions/）
3. 启用"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择此项目的目录

## 使用方法

1. 点击 Chrome 工具栏中的扩展图标
2. 点击"开始截取公式"按钮
3. 鼠标悬停在网页上的数学公式上，会自动高亮显示
4. 点击想要捕获的公式
5. 点击"转换为 MathType 格式"按钮
6. 打开 Word 文档，使用粘贴功能即可插入公式

## 支持的公式格式

- LaTeX
- MathML
- MathJax 渲染的公式
- 其他常见数学公式格式

## 注意事项

- 确保目标网页中的公式已完全加载
- 部分网站可能需要特殊权限才能访问公式内容
- 建议在粘贴到 Word 之前先预览公式是否正确

## 贡献

欢迎提交问题和改进建议！

## 许可证

MIT License
